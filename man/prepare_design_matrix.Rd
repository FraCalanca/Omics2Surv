% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_design_matrix.R
\name{prepare_design_matrix}
\alias{prepare_design_matrix}
\title{Prepare Design Matrix from MultiAssayExperiment for Modeling}
\usage{
prepare_design_matrix(mae, assay_name, clinical_list = NULL, remove_na = TRUE)
}
\arguments{
\item{mae}{A MultiAssayExperiment object containing omics experiments and clinical
data in \code{colData}.}

\item{assay_name}{Character string specifying the name of the assay (omics layer)
to extract from the MAE. Must match an experiment name in \code{names(mae)}.}

\item{clinical_list}{Character vector of clinical variable names to include in the
design matrix. Variables are extracted from \code{colData(mae)}. If NULL, only
omics features are included. Default is NULL.}

\item{remove_na}{Logical indicating whether to remove samples (rows) with any
missing values. If TRUE, samples with NA in any variable are excluded. If FALSE,
NAs are retained. Default is TRUE.}
}
\value{
A numeric matrix where:
\itemize{
\item Rows represent samples (patients)
\item Columns represent features:
\itemize{
\item Clinical variables (if \code{clinical_list} is specified), followed by
\item Omics features (genes, proteins, metabolites, etc.)
}
\item Row names are sample identifiers
\item Column names are feature names
\item All values are numeric (factors are converted to numeric codes)
}
}
\description{
Extracts omics data from a MultiAssayExperiment object and optionally combines it
with clinical variables to create a design matrix suitable for survival modeling.
Handles sample ordering, NA removal, and factor variable conversion.
}
\details{
The function performs the following operations:
\enumerate{
\item \strong{Extract omics data}: Retrieves the "counts" assay from the specified
experiment in the MAE
\item \strong{Determine sample order}: Uses column names from omics data as the
reference sample ordering
\item \strong{Extract clinical data}: Retrieves clinical variables from MAE colData,
ordered to match omics samples
\item \strong{Combine data} (if clinical_list is specified):
\itemize{
\item Subsets clinical variables to requested list
\item Converts factors to numeric codes
\item Binds clinical variables (columns) with transposed omics data
}
\item \strong{Handle missing data} (if remove_na = TRUE):
\itemize{
\item Identifies samples with any NA values
\item Removes these samples from the design matrix
}
}
}
\seealso{
\code{\link[MultiAssayExperiment]{MultiAssayExperiment}} for the MAE object class
\code{\link[MultiAssayExperiment]{colData}} for accessing clinical data
\code{\link{prepare_surv_data}} for preparing survival outcome data
}
